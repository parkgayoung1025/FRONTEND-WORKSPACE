<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>변수와 자료형</title>
</head>
<body>
    <h1>변수와 자료형</h1>

    <h3>* 변수 선언 위치에 따른 전역 변수/지역 변수</h3>

    <pre>
        &lt;script&gt;
            let 변수명; // 전역 변수(global)
            const 변수명; // 상수(값을 할당하면 바꿀 수 없음)

            var 변수명; // 전역 변수(global) 과거에 자주 쓰이던 키워드

            변수명; // 전역 변수(global)

            function 함수명() {
                var 변수명; // 지역 변수(local)

                변수명; // 전역 변수
            }
            var 변수 문제점이 많아서 let, const로 대체됨
            but, 아직도 많은 스크립트에서 var가 사용되고 있음
        &lt;/script&gt;
    </pre>

    <script>
        // 1) 영역 문제
        if(true) {
            var varTest = "var"; // 에러 안 남(함수 단위 스코프, 함수 내에서 선언되면 함수 전체, 전역 변수로 선언되면 전역에 남아있다.)
            let letTest = "let"; // 에러남(블록 단위 스코프(자바와 비슷))
        }
        console.log(varTest);
        //console.log(letTest);

        // 2) 중복 문제
        var user;
        var user;
        
        let user2;
        //let user2;

        // 전역 변수들은 자동으로 window 객체의 필드로 등록된다.
        // window.alert()과 같이 window.str, str
        str = "전역 변수";
        var str2 = "var 전역 변수";
        let str3 = "let 전역 변수"; // window 객체에 맵핑이 안 됨

        // window.onload == 해당 html 문서가 다 로딩이 완료되고 나서 실행할 함수들을 추가할 수 있음
        window.onload = function() {
            var str = "지역 변수"; // 전역 변수명과 중복
            let str3 = "새로운 지역 변수";
            str4 = "??"; // 전역 변수. 변수명 붙이지 않은 상태로 새로운 변수 할당 시 window에 맵핑됨

            console.log("----------------------str----------------------");
            console.log(str); // 지역 변수명과 전역 변수명이 동일한 변수 호출 시 지역 변수 호출
            // window라는 녀석을 호출해서 전역 변수로 접근이 가능함
            console.log(window.str);
            console.log(this.str);

            console.log("----------------------str2----------------------");
            console.log(str2);
            console.log(window.str2);
            console.log(this.str2);

            console.log("----------------------str3----------------------");
            console.log(str3);
            console.log(window.str3); // undefined(정의되어 있지 않음)
            console.log(this.str3);

            console.log("----------------------str4----------------------");
            console.log(str4);
        }

        function test(){
            console.log("전역 변수들 출력");
            console.log(str);
            console.log(str2);
            console.log(str3);
            console.log(str4);
        }
    </script>

    <button onclick="test();">클릭</button>

    <hr>

    <h3>* 자료형</h3>

    <p>
        변수 선언 시 자료형을 별도로 지정하지 않음(자료형의 개념이 없는 건 아님) <br>
        -> 변수에 대입되는 값에 따라서 알아서 자료형이 자동으로 결정됨
    </p>

    <h4>자바스크립트의 자료형</h4>

    <ul>
        <li>string (문자열)</li>
        <li>number (숫자)</li>
        <li>BigInt (엄청 큰 숫자)</li>
        <li>boolean (논리값)</li>
        <li>object (객체)</li>
        <li>function (함수)</li>
        <li>undefined (초기화가 안된 변수)</li>
    </ul>

    <button onclick="typeTest();">자료형 테스트</button>
    <div id="area" style="border: 1px solid black;"></div>

    <script>
        function typeTest(){
            
            var name = '홍길동';
            let age = 20;
            let flag = true;

            let hobby = ["영화", "음악", '낮잠'];

            const obj = new Object();
            const obj2 = {};
            // 위 아래는 100% 동일한 코드
            const test = "111";

            const user = {
                name:'김갑생',
                age:30,
                id:'user01'
            }
            user.name = '홍길동';
            user.uewKey = "abc";
            console.log(user);

            let testFn = function(){
                alert("zzzz");
            }

            let noVal;

            // let divEl = document.getElementById("area");
            // 자료형 확인시 사용되는 함수 : typeof(변수명)

            // divEl.innerHTML += name + "의 자료형 : " + typeof(name) + "<br>";
            // divEl.innerHTML += age + "의 자료형 : " + typeof(age) + "<br>";
            // divEl.innerHTML += flag + "의 자료형 : " + typeof(flag) + "<br>";
            // divEl.innerHTML += hobby + "의 자료형 : " + typeof(hobby) + "<br>";
            // divEl.innerHTML += name + "의 자료형 : " + typeof(name) + "<br>";
            printDivEl(name);
            printDivEl(age);
            printDivEl(flag);
            printDivEl(hobby);
            printDivEl(user);
            printDivEl(testFn);
            printDivEl(noVal);

            // 특이한 케이스
            typeof(null); // object
            // null은 별도의 고유한 자료형을 가지는 특수한 값임. 객체가 아님 --> typeof 메서드의 오류
            // 하위 호환성을 위해 오류를 수정하지 않고 남겨둔 상황

            // 객체 내부의 속성에 접근할 때 ==> .(온점)으로 접근
            let divEl = document.getElementById("area");
            divEl.innerHTML += user.name + "의 나이는 : " + user.age + "살이며 아이디는 " + user.id + "입니다. <br>";
        }

        function printDivEl(value){
            let divEl = document.getElementById("area");

            divEl.innerHTML += value + "의 자료형 : " + typeof(value) + "<br>";
        }
    </script>

    <br>


</body>
</html>